<ui:composition
    template="/WEB-INF/facelets/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

  <ui:define name="content">
        <h:body>
            <div class="jumbotron">
            <div class="container">
            <h1 class="h2 mb-2 font-weight-normal" text-align="center">Edita tu perfil</h1>
            <br/>
            <!-- FOTO -->
            <div class="row">
             <div class="col-md-4 order-md-2 mb-4">
                <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted">Foto de Perfil</span>
                </h4>
                 <c:choose>
                           <c:when test="#{iniciaSesion.hayImagen()}">
                               <p:graphicImage value="#{iniciaSesion.usuario.imagenPerfil}" width="48" height="48"/>
                            </c:when>
                                <c:otherwise>
                                    <h:graphicImage value="sinfoto.jpg"/>
                                </c:otherwise>
                            </c:choose>
                <ul class="list-group mb-3">
                    <!--li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div class="card mb-4 box-shadow">
                            <img src="#{iniciaSesion.usuario.getImagenPerfil()}" class="img-circle" alt="Foto de Perfil"/>    
                                <div class="card-body"-->
                                    <h:form enctype="multipart/form-data">
                                      <p:growl id="messages" showDetail="true" />
                                                <p:fileUpload value="#{iniciaSesion.imagen}" mode="simple" skinSimple="true" 
                                                              fileUploadListener="#{iniciaSesion.fileUploadListener}"/>

<!--                                                <p:commandButton value="Submit" ajax="false" 
                                                 actionListener="#{fileUploadView.upload}" disabled="true" />-->
                                    </h:form>
                            <!--/div>
                        </div>
                    </li-->
                </ul>
               <!--div class="col-md-4">
                <div class="thumbnail">
                  <a href="/sinfoto.jpg">
                    <img src="sinfoto.jpg" class="img-circle" alt="Foto de Perfil"/>    
                      <div class="caption">
                         <h:form enctype="multipart/form-data">
                                      <p:growl id="messages" showDetail="true" />

                                             <p:fileUpload value="#{EditaPerfil.imagen}" mode="simple" 
                                               sizeLimit="100000" fileLimit="1" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />

                                                <p:commandButton value="Submit" ajax="false" 
                                                 actionListener="#{fileUploadView.upload}" disabled="true" />
                                        </h:form>
                    </div>
                  </a>
                </div>
              </div-->
             </div>
             
            <!-- DATOS -->    
            <div class="mb-3">
                <h:form class="formulario">
                    <p:growl id="growl" showDetail="true" />

                    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5" >
                        
                        <p:outputLabel value="Nombre:" /> 
                        <p:inputText value="#{iniciaSesion.nombre}" label="Nombre"/>
                        <p:outputLabel value="Apellido Paterno:" /> 
                        <p:inputText value="#{iniciaSesion.apellidoPaterno}"/> 
                        <p:outputLabel value="Apellido Materno:" /> 
                        <p:inputText value="#{iniciaSesion.apellidoMaterno}"/> 
                        <p:outputLabel value="Correo:" /> 
                        <p:inputText id="correo" value="#{iniciaSesion.correo}"  label="Correo">
                        </p:inputText>
                        <p:outputLabel id="confCorreo" value="Confirmacion correo:" /> 
                        <p:inputText value="#{iniciaSesion.correoConfirmacion}" label="Confirmacion correo">
                        </p:inputText>
                        <p:outputLabel for="popup" value="Fecha de Nacimiento:" />
                        <p:calendar id="popup" value="#{iniciaSesion.fechaNacimiento}"/>
                        <p:outputLabel value="Cambiar carrera:" />
                        <h:selectOneMenu id="txt2" value="#{iniciaSesion.carrera}" label="Cambiar carrera:">
                            <f:selectItem itemLabel="Selecciona una" itemValue="" noSelectionOption="true" />
                            <f:selectItem itemLabel="Ciencias de la Computación" itemValue="Ciencias de la Computacion" />
                            <f:selectItem itemLabel="Actuaría" itemValue="Actuaría" />
                            <f:selectItem itemLabel="Biología" itemValue="Biología" />
                            <f:selectItem itemLabel="Matematicas" itemValue="Matematicas" />
                            <f:selectItem itemLabel="Física" itemValue="Física" />
                            <f:selectItem itemLabel="Ciencias de la Tierra" itemValue="Ciencias de la Tierra" />
                            <f:selectItem itemLabel="Matematicas Aplicadas" itemValue="Matematicas Aplicadas" />
                        </h:selectOneMenu>
                        
                        <p:commandButton value="Guardar" action="#{iniciaSesion.guardar()}" id="ajax"
                                         update="msn, growl" styleClass="ui-priority-primary"/>
                        
                        <p><a href="PrincipalIH.xhtml">Volver</a></p>
                    </h:panelGrid>
                    
                    <h:outputText id="msn" value="#{iniciaSesion.mensaje}" />

                    <p:dialog modal="true" resizable="false" header="Values" widgetVar="dlg" showEffect="fold">
                        <p:panelGrid id="display" columns="2" columnClasses="label,value">
                            <h:outputText value="Popup:" />
                            <h:outputText value="#{iniciaSesion.fechaNacimiento}">
                                <f:convertDateTime pattern="MM/dd/yyyy" />
                            </h:outputText>
                        </p:panelGrid>
                    </p:dialog>
                </h:form>
                </div>
            </div>
            </div>
            </div>
        </h:body>
   
  </ui:define>

</ui:composition>

